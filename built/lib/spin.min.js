!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var s=["opacity",t,~~(100*e),n,i].join("-"),a=.01+100*(n/i),r=Math.max(1-(1-e)/t*(100-a),e),o=l.substring(0,l.indexOf("Animation")).toLowerCase(),c=o&&"-"+o+"-"||"";return u[s]||(p.insertRule("@"+c+"keyframes "+s+"{"+"0%{opacity:"+r+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+r+"}"+"}",p.cssRules.length),u[s]=1),s}function i(e,t){var n,i,s=e.style;if(void 0!==s[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<d.length;i++)if(n=d[i]+t,void 0!==s[n])return n}function s(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function r(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function o(e){return"undefined"==typeof this?new o(e):(this.opts=a(e||{},o.defaults,h),void 0)}function c(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),o.prototype.lines=function(e,i){function a(){return s(n("group",{coordsize:l+" "+l,coordorigin:-c+" "+-c}),{width:l,height:l})}function r(e,r,o){t(u,t(s(a(),{rotation:360/i.lines*e+"deg",left:~~r}),t(s(n("roundrect",{arcsize:i.corners}),{width:c,height:i.width,left:i.radius,top:-i.width>>1,filter:o}),n("fill",{color:i.color,opacity:i.opacity}),n("stroke",{opacity:0}))))}var o,c=i.length+i.width,l=2*c,d=2*-(i.width+i.length)+"px",u=s(a(),{position:"absolute",top:d,left:d});if(i.shadow)for(o=1;o<=i.lines;o++)r(o,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(o=1;o<=i.lines;o++)r(o);return t(e,u)},o.prototype.opacity=function(e,t,n,i){var s=e.firstChild;i=i.shadow&&i.lines||0,s&&t+i<s.childNodes.length&&(s=s.childNodes[t+i],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=n))}}var l,d=["webkit","Moz","ms","O"],u={},p=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};o.defaults={},a(o.prototype,{spin:function(t){this.stop();var n,i,a=this,o=a.opts,c=a.el=s(e(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),d=o.radius+o.length+o.width;if(t&&(t.insertBefore(c,t.firstChild||null),i=r(t),n=r(c),s(c,{left:("auto"==o.left?i.x-n.x+(t.offsetWidth>>1):parseInt(o.left,10)+d)+"px",top:("auto"==o.top?i.y-n.y+(t.offsetHeight>>1):parseInt(o.top,10)+d)+"px"})),c.setAttribute("role","progressbar"),a.lines(c,a.opts),!l){var u,p=0,h=(o.lines-1)*(1-o.direction)/2,g=o.fps,f=g/o.speed,m=(1-o.opacity)/(f*o.trail/100),v=f/o.lines;!function b(){p++;for(var e=0;e<o.lines;e++)u=Math.max(1-(p+(o.lines-e)*v)%f*m,o.opacity),a.opacity(c,e*o.direction+h,u,o);a.timeout=a.el&&setTimeout(b,~~(1e3/g))}()}return a},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,a){function r(t,n){return s(e(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*c+a.rotate)+"deg) translate("+a.radius+"px"+",0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var o,c=0,d=(a.lines-1)*(1-a.direction)/2;c<a.lines;c++)o=s(e(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:l&&n(a.opacity,a.trail,d+c*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&t(o,s(r("#000","0 0 4px #000"),{top:"2px"})),t(i,t(o,r(a.color,"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var g=s(e("group"),{behavior:"url(#default#VML)"});return!i(g,"transform")&&g.adj?c():l=i(g,"animation"),o});