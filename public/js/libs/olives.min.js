/*
 Olives 1.1.9 http://flams.github.com/olives
 The MIT License (MIT)
 Copyright (c) 2012 Olivier Scherrer <pode.fr@gmail.com> - Olivier Wietrich <olivier.wietrich@gmail.com>
*/
define("Olives/DomUtils",function(){return{getNodes:function(c,d){return this.isAcceptedType(c)?(c.parentNode||document.createDocumentFragment().appendChild(c),c.parentNode.querySelectorAll(d||"*")):false},getDataset:function(c){var d=0,e,f={},g,a;if(this.isAcceptedType(c))if(c.hasOwnProperty("dataset"))return c.dataset;else{for(e=c.attributes.length;d<e;d++)g=c.attributes[d].name.split("-"),g.shift()=="data"&&(f[a=g.join("-")]=c.getAttribute("data-"+a));return f}else return false},isAcceptedType:function(c){return c instanceof
HTMLElement||c instanceof SVGElement?true:false},setAttribute:function(c,d,e){return c instanceof HTMLElement?(c[d]=e,true):c instanceof SVGElement?(c.setAttribute(d,e),true):false}}});define("Olives/Event-plugin",function(){return function(c){this.listen=function(d,e,f,g){d.addEventListener(e,function(a){c[f].call(c,a,d)},g=="true")}}});
define("Olives/LocalStore",["Store","Tools"],function(c,d){function e(){var c=null,e=localStorage,a=function(){e.setItem(c,this.toJSON())};this.setLocalStorage=function(a){return a&&a.setItem instanceof Function?(e=a,true):false};this.getLocalStorage=function(){return e};this.sync=function(b){return typeof b=="string"?(c=b,b=JSON.parse(e.getItem(b)),d.loop(b,function(a,b){this.has(b)||this.set(b,a)},this),a.call(this),this.watch("added",a,this),this.watch("updated",a,this),this.watch("deleted",a,
this),true):false}}return function(f){e.prototype=new c(f);return new e}});
define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function(c,d,e,f){return function(d,a){var b=null,j={},k={};this.observers={};this.setModel=function(a){return a instanceof c?(b=a,true):false};this.getModel=function(){return b};this.ItemRenderer=function(a,h){var i=null,j=null,d=null,g=null,k=null;this.setRenderer=function(a){i=a;return true};this.getRenderer=function(){return i};this.setRootNode=function(a){return f.isAcceptedType(a)?(d=a,a=d.querySelector("*"),this.setRenderer(a),
a&&d.removeChild(a),true):false};this.getRootNode=function(){return d};this.setPlugins=function(a){j=a;return true};this.getPlugins=function(){return j};this.items=new c([]);this.setStart=function(a){return g=parseInt(a,10)};this.getStart=function(){return g};this.setNb=function(a){return k=a=="*"?a:parseInt(a,10)};this.getNb=function(){return k};this.addItem=function(a){var b;return typeof a=="number"&&!this.items.get(a)?(b=this.create(a))?((a=this.getNextItem(a))?d.insertBefore(b,a):d.appendChild(b),
true):false:false};this.getNextItem=function(a){return this.items.alter("slice",a+1).filter(function(a){if(f.isAcceptedType(a))return true})[0]};this.removeItem=function(a){var b=this.items.get(a);return b?(d.removeChild(b),this.items.set(a),true):false};this.create=function(a){if(b.has(a)){var h=i.cloneNode(true),l=f.getNodes(h);e.toArray(l).forEach(function(b){b.setAttribute("data-"+j.name+"_id",a)});this.items.set(a,h);j.apply(h);return h}};this.render=function(){var a=k=="*"?b.getNbItems():k,
i=[];if(k!==null&&g!==null){this.items.loop(function(h,l){(l<g||l>=g+a||!b.has(l))&&i.push(l)},this);i.sort(e.compareNumbers).reverse().forEach(this.removeItem,this);for(var h=g,l=a+g;h<l;h++)this.addItem(h);return true}else return false};this.setPlugins(a);this.setRootNode(h)};this.setItemRenderer=function(a,b){k[a||"default"]=b};this.getItemRenderer=function(a){return k[a]};this.foreach=function(a,h,i,c){var e=new this.ItemRenderer(this.plugins,a);e.setStart(i||0);e.setNb(c||"*");e.render();b.watch("added",
e.render,e);b.watch("deleted",function(a){e.render();this.observers[a]&&this.observers[a].forEach(function(a){b.unwatchValue(a)},this);delete this.observers[a]},this);this.setItemRenderer(h,e)};this.updateStart=function(a,b){var i=this.getItemRenderer(a);return i?(i.setStart(b),true):false};this.updateNb=function(a,b){var i=this.getItemRenderer(a);return i?(i.setNb(b),true):false};this.refresh=function(a){return(a=this.getItemRenderer(a))?(a.render(),true):false};this.bind=function(a,h,i){var i=i||
"",c=a.getAttribute("data-"+this.plugins.name+"_id"),j=i.split("."),d=c||j.shift(),g=c?i:j.join("."),c=e.getNestedProperty(b.get(d),g),k=e.toArray(arguments).slice(3);if(c||c===0||c===false)this.execBinding.apply(this,[a,h,c].concat(k))||f.setAttribute(a,h,c);this.hasBinding(h)||a.addEventListener("change",function(){b.has(d)&&(g?b.update(d,i,a[h]):b.set(d,a[h]))},true);this.observers[d]=this.observers[d]||[];this.observers[d].push(b.watchValue(d,function(b){this.execBinding.apply(this,[a,h,e.getNestedProperty(b,
g)].concat(k))||f.setAttribute(a,h,e.getNestedProperty(b,g))},this))};this.set=function(a){return f.isAcceptedType(a)&&a.name?(b.set(a.name,a.value),true):false};this.form=function h(h){if(h&&h.nodeName=="FORM"){var a=this;h.addEventListener("submit",function(b){e.toArray(h.querySelectorAll("[name]")).forEach(a.set,a);b.preventDefault()},true);return true}else return false};this.addBinding=function(a,b){return a&&typeof a=="string"&&typeof b=="function"?(j[a]=b,true):false};this.execBinding=function(a,
b){return this.hasBinding(b)?(j[b].apply(a,Array.prototype.slice.call(arguments,2)),true):false};this.hasBinding=function(a){return j.hasOwnProperty(a)};this.getBinding=function(a){return j[a]};this.addBindings=function(a){return e.loop(a,function(a,b){this.addBinding(b,a)},this)};this.setModel(d);this.addBindings(a)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins","Olives/DomUtils","Tools"],function(c,d,e,f,g){return function(a){var b=function(a){var b=k||document.createElement("div");if(a.template){typeof a.template=="string"?b.innerHTML=a.template.trim():f.isAcceptedType(a.template)&&b.appendChild(a.template);if(b.childNodes.length>1)throw Error("UI.template should have only one parent node");else a.dom=b.childNodes[0];a.plugins.apply(a.dom)}else throw Error("UI.template must be set prior to render");
},j=function i(a,i,b){i&&(b?i.insertBefore(a.dom,b):i.appendChild(a.dom),k=i)},k=null,l=new c("Init",{Init:[["render",b,this,"Rendered"],["place",function(a,c){b(a);j.apply(null,g.toArray(arguments))},this,"Rendered"]],Rendered:[["place",j,this],["render",b,this]]});this.model=a instanceof d?a:new d;this.plugins=new e;this.dom=this.template=null;this.place=function(a,b){l.event("place",this,a,b)};this.render=function(){l.event("render",this)};this.setTemplateFromDom=function(a){return f.isAcceptedType(a)?
(this.template=a,true):false};this.alive=function(a){return f.isAcceptedType(a)?(this.setTemplateFromDom(a),this.place(a.parentNode,a.nextElementSibling),true):false};this.getCurrentPlace=function(){return k}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(c,d){return function(){var e={},f=function(a){return a.trim()},g=function(a,b,c){b.split(";").forEach(function(b){var d=b.split(":"),b=d[0].trim(),d=d[1]?d[1].split(",").map(f):[];d.unshift(a);e[c]&&e[c][b]&&e[c][b].apply(e[c],d)})};this.add=function(a,b){var c=this;return typeof a=="string"&&typeof b=="object"&&b?(e[a]=b,b.plugins={name:a,apply:function(){return c.apply.apply(c,arguments)}},true):false};this.addAll=function(a){return c.loop(a,
function(a,c){this.add(c,a)},this)};this.get=function(a){return e[a]};this.del=function(a){return delete e[a]};this.apply=function(a){var b;return d.isAcceptedType(a)?(b=d.getNodes(a),c.loop(c.toArray(b),function(a){c.loop(d.getDataset(a),function(b,c){g(a,b,c)})}),a):false}}});
define("Olives/Transport",["Observable","Tools"],function(c){return function(d,e){var f=null,g=null;new c;this.setIO=function(a){return a&&typeof a.connect=="function"?(g=a,true):false};this.getIO=function(){return g};this.connect=function(a){return typeof a=="string"?(f=g.connect(a),true):false};this.getSocket=function(){return f};this.on=function(a,b){return f.on(a,b)};this.once=function(a,b){return f.once(a,b)};this.emit=function(a,b,c){return f.emit(a,b,c)};this.removeListener=function(a,b,c){return f.removeListener(a,
b,c)};this.request=function(a,b,c,d){return typeof a=="string"&&typeof b!="undefined"?(b={eventId:Date.now()+Math.floor(Math.random()*1E6),data:b},this.once(b.eventId,function(){c&&c.apply(d||null,arguments)}),this.emit(a,b),true):false};this.listen=function(a,b,c,d){if(typeof a=="string"&&typeof b!="undefined"&&typeof c=="function"){var e={eventId:Date.now()+Math.floor(Math.random()*1E6),data:b,keepAlive:true},g=function(){c&&c.apply(d||null,arguments)},f=this;this.on(e.eventId,g);this.emit(a,e);
return function(){f.emit("disconnect-"+e.eventId);f.removeListener(e.eventId,g)}}else return false};this.setIO(d);this.connect(e)}});
define("Olives/UI-plugin",["Olives/OObject","Tools"],function(c,d){return function(e){var f={};this.place=function(d,a){if(f[a]instanceof c)f[a].place(d);else throw Error(a+" is not an OObject UI in place:"+a);};this.set=function(d,a){return typeof d=="string"&&a instanceof c?(f[d]=a,true):false};this.setAll=function(c){d.loop(c,function(a,b){this.set(b,a)},this)};this.get=function(c){return f[c]};this.setAll(e)}});
define("Olives/DomUtils",function(){return{getNodes:function c(f,e){if(this.isAcceptedType(f)){if(!f.parentNode){document.createDocumentFragment().appendChild(f)}return f.parentNode.querySelectorAll(e||"*")}else{return false}},getDataset:function a(k){var g=0,e,j={},f,h;if(this.isAcceptedType(k)){if(k.hasOwnProperty("dataset")){return k.dataset}else{for(e=k.attributes.length;g<e;g++){f=k.attributes[g].name.split("-");if(f.shift()=="data"){j[h=f.join("-")]=k.getAttribute("data-"+h)}}return j}}else{return false}},isAcceptedType:function d(e){if(e instanceof HTMLElement||e instanceof SVGElement){return true}else{return false}},setAttribute:function b(e,g,f){if(e instanceof HTMLElement){e[g]=f;return true}else{if(e instanceof SVGElement){e.setAttribute(g,f);return true}else{return false}}}}});define("Olives/Event-plugin",function(){return function a(b){this.listen=function(e,d,f,c){e.addEventListener(d,function(g){b[f].call(b,g,e)},(c=="true"))}}});define("Olives/LocalStore",["Store","Tools"],function LocalStore(d,b){function a(){var e=null,h=localStorage,g=function(){h.setItem(e,this.toJSON())};this.setLocalStorage=function g(k){if(k&&k.setItem instanceof Function){h=k;return true}else{return false}};this.getLocalStorage=function f(){return h};this.sync=function j(k){var m;if(typeof k=="string"){e=k;m=JSON.parse(h.getItem(k));b.loop(m,function(o,n){if(!this.has(n)){this.set(n,o)}},this);g.call(this);this.watch("added",g,this);this.watch("updated",g,this);this.watch("deleted",g,this);return true}else{return false}}}return function c(e){a.prototype=new d(e);return new a}});define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function ModelPlugin(e,b,d,a){return function c(w,k){var v=null,h={},n={};this.observers={};this.setModel=function r(D){if(D instanceof e){v=D;return true}else{return false}};this.getModel=function t(){return v};this.ItemRenderer=function y(G,H){var J=null,F=null,E=null,T=null,X=null;this.setRenderer=function U(Z){J=Z;return true};this.getRenderer=function O(){return J};this.setRootNode=function D(Z){var aa;if(a.isAcceptedType(Z)){E=Z;aa=E.querySelector("*");this.setRenderer(aa);aa&&E.removeChild(aa);return true}else{return false}};this.getRootNode=function V(){return E};this.setPlugins=function R(Z){F=Z;return true};this.getPlugins=function L(){return F};this.items=new e([]);this.setStart=function P(Z){T=parseInt(Z,10);return T};this.getStart=function Q(){return T};this.setNb=function N(Z){X=Z=="*"?Z:parseInt(Z,10);return X};this.getNb=function I(){return X};this.addItem=function S(ab){var aa,Z;if(typeof ab=="number"&&!this.items.get(ab)){aa=this.create(ab);if(aa){Z=this.getNextItem(ab);Z?E.insertBefore(aa,Z):E.appendChild(aa);return true}else{return false}}else{return false}};this.getNextItem=function K(Z){return this.items.alter("slice",Z+1).filter(function(aa){if(a.isAcceptedType(aa)){return true}})[0]};this.removeItem=function W(aa){var Z=this.items.get(aa);if(Z){E.removeChild(Z);this.items.set(aa);return true}else{return false}};this.create=function M(ab){if(v.has(ab)){var aa=J.cloneNode(true),Z=a.getNodes(aa);d.toArray(Z).forEach(function(ac){ac.setAttribute("data-"+F.name+"_id",ab)});this.items.set(ab,aa);F.apply(aa);return aa}};this.render=function Y(){var aa=X=="*"?v.getNbItems():X;var Z=[];if(X!==null&&T!==null){this.items.loop(function(ac,ab){if(ab<T||ab>=(T+aa)||!v.has(ab)){Z.push(ab)}},this);Z.sort(d.compareNumbers).reverse().forEach(this.removeItem,this);for(i=T,l=aa+T;i<l;i++){this.addItem(i)}return true}else{return false}};this.setPlugins(G);this.setRootNode(H)};this.setItemRenderer=function x(E,D){E=E||"default";n[E]=D};this.getItemRenderer=function s(D){return n[D]};this.foreach=function q(G,F,H,E){var D=new this.ItemRenderer(this.plugins,G);D.setStart(H||0);D.setNb(E||"*");D.render();v.watch("added",D.render,D);v.watch("deleted",function(I){D.render();this.observers[I]&&this.observers[I].forEach(function(J){v.unwatchValue(J)},this);delete this.observers[I]},this);this.setItemRenderer(F,D)};this.updateStart=function g(F,E){var D=this.getItemRenderer(F);if(D){D.setStart(E);return true}else{return false}};this.updateNb=function A(F,E){var D=this.getItemRenderer(F);if(D){D.setNb(E);return true}else{return false}};this.refresh=function j(E){var D=this.getItemRenderer(E);if(D){D.render();return true}else{return false}};this.bind=function C(J,L,E){E=E||"";var F=J.getAttribute("data-"+this.plugins.name+"_id"),K=E.split("."),G=F||K.shift(),D=F?E:K.join("."),H=d.getNestedProperty(v.get(G),D),I=d.toArray(arguments).slice(3);if(H||H===0||H===false){if(!this.execBinding.apply(this,[J,L,H].concat(I))){a.setAttribute(J,L,H)}}if(!this.hasBinding(L)){J.addEventListener("change",function(M){if(v.has(G)){if(D){v.update(G,E,J[L])}else{v.set(G,J[L])}}},true)}this.observers[G]=this.observers[G]||[];this.observers[G].push(v.watchValue(G,function(M){if(!this.execBinding.apply(this,[J,L,d.getNestedProperty(M,D)].concat(I))){a.setAttribute(J,L,d.getNestedProperty(M,D))}},this))};this.set=function p(D){if(a.isAcceptedType(D)&&D.name){v.set(D.name,D.value);return true}else{return false}};this.form=function f(E){if(E&&E.nodeName=="FORM"){var D=this;E.addEventListener("submit",function(F){d.toArray(E.querySelectorAll("[name]")).forEach(D.set,D);F.preventDefault()},true);return true}else{return false}};this.addBinding=function B(D,E){if(D&&typeof D=="string"&&typeof E=="function"){h[D]=E;return true}else{return false}};this.execBinding=function m(E,D){if(this.hasBinding(D)){h[D].apply(E,Array.prototype.slice.call(arguments,2));return true}else{return false}};this.hasBinding=function z(D){return h.hasOwnProperty(D)};this.getBinding=function o(D){return h[D]};this.addBindings=function u(D){return d.loop(D,function(F,E){this.addBinding(E,F)},this)};this.setModel(w);this.addBindings(k)}});define("Olives/OObject",["StateMachine","Store","Olives/Plugins","Olives/DomUtils","Tools"],function OObject(a,e,f,b,c){return function d(p){var m=function m(r){var q=g||document.createElement("div");if(r.template){if(typeof r.template=="string"){q.innerHTML=r.template.trim()}else{if(b.isAcceptedType(r.template)){q.appendChild(r.template)}}if(q.childNodes.length>1){throw Error("UI.template should have only one parent node")}else{r.dom=q.childNodes[0]}r.plugins.apply(r.dom)}else{throw Error("UI.template must be set prior to render")}},j=function j(s,q,r){if(q){r?q.insertBefore(s.dom,r):q.appendChild(s.dom);g=q}},n=function n(q,r){m(q);j.apply(null,c.toArray(arguments))},g=null,h=new a("Init",{Init:[["render",m,this,"Rendered"],["place",n,this,"Rendered"]],Rendered:[["place",j,this],["render",m,this]]});this.model=p instanceof e?p:new e;this.plugins=new f();this.template=null;this.dom=null;this.place=function j(r,q){h.event("place",this,r,q)};this.render=function m(){h.event("render",this)};this.setTemplateFromDom=function o(q){if(b.isAcceptedType(q)){this.template=q;return true}else{return false}};this.alive=function k(q){if(b.isAcceptedType(q)){this.setTemplateFromDom(q);this.place(q.parentNode,q.nextElementSibling);return true}else{return false}};this.getCurrentPlace=function(){return g}}});define("Olives/Plugins",["Tools","Olives/DomUtils"],function Plugins(b,a){return function c(){var m={},d=function d(n){return n.trim()},h=function h(p,n,o){n.split(";").forEach(function(r){var q=r.split(":"),t=q[0].trim(),s=q[1]?q[1].split(",").map(d):[];s.unshift(p);if(m[o]&&m[o][t]){m[o][t].apply(m[o],s)}})};this.add=function k(p,r){var q=this,o="plugins";if(typeof p=="string"&&typeof r=="object"&&r){m[p]=r;r[o]={name:p,apply:function n(){return q.apply.apply(q,arguments)}};return true}else{return false}};this.addAll=function j(n){return b.loop(n,function(p,o){this.add(o,p)},this)};this.get=function g(n){return m[n]};this.del=function e(n){return delete m[n]};this.apply=function f(o){var n;if(a.isAcceptedType(o)){n=a.getNodes(o);b.loop(b.toArray(n),function(p){b.loop(a.getDataset(p),function(q,r){h(p,q,r)})});return o}else{return false}}}});define("Olives/Transport",["Observable","Tools"],function Transport(b,c){return function a(p,r){var m=null,k=null,d=new b(),g={};this.setIO=function e(u){if(u&&typeof u.connect=="function"){k=u;return true}else{return false}};this.getIO=function f(){return k};this.connect=function t(u){if(typeof u=="string"){m=k.connect(u);return true}else{return false}};this.getSocket=function o(){return m};this.on=function q(v,u){return m.on(v,u)};this.once=function h(v,u){return m.once(v,u)};this.emit=function s(u,v,w){return m.emit(u,v,w)};this.removeListener=function s(u,v,w){return m.removeListener(u,v,w)};this.request=function n(y,z,x,w){if(typeof y=="string"&&typeof z!="undefined"){var v={eventId:Date.now()+Math.floor(Math.random()*1000000),data:z},u=function(){x&&x.apply(w||null,arguments)};this.once(v.eventId,u);this.emit(y,v);return true}else{return false}};this.listen=function j(A,B,z,x){if(typeof A=="string"&&typeof B!="undefined"&&typeof z=="function"){var v={eventId:Date.now()+Math.floor(Math.random()*1000000),data:B,keepAlive:true},u=function(){z&&z.apply(x||null,arguments)},y=this;this.on(v.eventId,u);this.emit(A,v);return function w(){y.emit("disconnect-"+v.eventId);y.removeListener(v.eventId,u)}}else{return false}};this.setIO(p);this.connect(r)}});define("Olives/UI-plugin",["Olives/OObject","Tools"],function(c,b){return function a(f){var e={};this.place=function d(m,k){if(e[k] instanceof c){e[k].place(m)}else{throw new Error(k+" is not an OObject UI in place:"+k)}};this.set=function j(k,m){if(typeof k=="string"&&m instanceof c){e[k]=m;return true}else{return false}};this.setAll=function h(k){b.loop(k,function(n,m){this.set(m,n)},this)};this.get=function g(k){return e[k]};this.setAll(f)}});define("Olives/DomUtils",function(){return{getNodes:function c(f,e){if(this.isAcceptedType(f)){if(!f.parentNode){document.createDocumentFragment().appendChild(f)}return f.parentNode.querySelectorAll(e||"*")}else{return false}},getDataset:function a(k){var g=0,e,j={},f,h;if(this.isAcceptedType(k)){if(k.hasOwnProperty("dataset")){return k.dataset}else{for(e=k.attributes.length;g<e;g++){f=k.attributes[g].name.split("-");if(f.shift()=="data"){j[h=f.join("-")]=k.getAttribute("data-"+h)}}return j}}else{return false}},isAcceptedType:function d(e){if(e instanceof HTMLElement||e instanceof SVGElement){return true}else{return false}},setAttribute:function b(e,g,f){if(e instanceof HTMLElement){e[g]=f;return true}else{if(e instanceof SVGElement){e.setAttribute(g,f);return true}else{return false}}}}});define("Olives/Event-plugin",function(){return function a(b){this.listen=function(e,d,f,c){e.addEventListener(d,function(g){b[f].call(b,g,e)},(c=="true"))}}});define("Olives/LocalStore",["Store","Tools"],function LocalStore(d,b){function a(){var e=null,h=localStorage,g=function(){h.setItem(e,this.toJSON())};this.setLocalStorage=function g(k){if(k&&k.setItem instanceof Function){h=k;return true}else{return false}};this.getLocalStorage=function f(){return h};this.sync=function j(k){var m;if(typeof k=="string"){e=k;m=JSON.parse(h.getItem(k));b.loop(m,function(o,n){if(!this.has(n)){this.set(n,o)}},this);g.call(this);this.watch("added",g,this);this.watch("updated",g,this);this.watch("deleted",g,this);return true}else{return false}}}return function c(e){a.prototype=new d(e);return new a}});define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function ModelPlugin(e,b,d,a){return function c(w,k){var v=null,h={},n={};this.observers={};this.setModel=function r(D){if(D instanceof e){v=D;return true}else{return false}};this.getModel=function t(){return v};this.ItemRenderer=function y(G,H){var J=null,F=null,E=null,T=null,X=null;this.setRenderer=function U(Z){J=Z;return true};this.getRenderer=function O(){return J};this.setRootNode=function D(Z){var aa;if(a.isAcceptedType(Z)){E=Z;aa=E.querySelector("*");this.setRenderer(aa);aa&&E.removeChild(aa);return true}else{return false}};this.getRootNode=function V(){return E};this.setPlugins=function R(Z){F=Z;return true};this.getPlugins=function L(){return F};this.items=new e([]);this.setStart=function P(Z){T=parseInt(Z,10);return T};this.getStart=function Q(){return T};this.setNb=function N(Z){X=Z=="*"?Z:parseInt(Z,10);return X};this.getNb=function I(){return X};this.addItem=function S(ab){var aa,Z;if(typeof ab=="number"&&!this.items.get(ab)){aa=this.create(ab);if(aa){Z=this.getNextItem(ab);Z?E.insertBefore(aa,Z):E.appendChild(aa);return true}else{return false}}else{return false}};this.getNextItem=function K(Z){return this.items.alter("slice",Z+1).filter(function(aa){if(a.isAcceptedType(aa)){return true}})[0]};this.removeItem=function W(aa){var Z=this.items.get(aa);if(Z){E.removeChild(Z);this.items.set(aa);return true}else{return false}};this.create=function M(ab){if(v.has(ab)){var aa=J.cloneNode(true),Z=a.getNodes(aa);d.toArray(Z).forEach(function(ac){ac.setAttribute("data-"+F.name+"_id",ab)});this.items.set(ab,aa);F.apply(aa);return aa}};this.render=function Y(){var aa=X=="*"?v.getNbItems():X;var Z=[];if(X!==null&&T!==null){this.items.loop(function(ac,ab){if(ab<T||ab>=(T+aa)||!v.has(ab)){Z.push(ab)}},this);Z.sort(d.compareNumbers).reverse().forEach(this.removeItem,this);for(i=T,l=aa+T;i<l;i++){this.addItem(i)}return true}else{return false}};this.setPlugins(G);this.setRootNode(H)};this.setItemRenderer=function x(E,D){E=E||"default";n[E]=D};this.getItemRenderer=function s(D){return n[D]};this.foreach=function q(G,F,H,E){var D=new this.ItemRenderer(this.plugins,G);D.setStart(H||0);D.setNb(E||"*");D.render();v.watch("added",D.render,D);v.watch("deleted",function(I){D.render();this.observers[I]&&this.observers[I].forEach(function(J){v.unwatchValue(J)},this);delete this.observers[I]},this);this.setItemRenderer(F,D)};this.updateStart=function g(F,E){var D=this.getItemRenderer(F);if(D){D.setStart(E);return true}else{return false}};this.updateNb=function A(F,E){var D=this.getItemRenderer(F);if(D){D.setNb(E);return true}else{return false}};this.refresh=function j(E){var D=this.getItemRenderer(E);if(D){D.render();return true}else{return false}};this.bind=function C(J,L,E){E=E||"";var F=J.getAttribute("data-"+this.plugins.name+"_id"),K=E.split("."),G=F||K.shift(),D=F?E:K.join("."),H=d.getNestedProperty(v.get(G),D),I=d.toArray(arguments).slice(3);if(H||H===0||H===false){if(!this.execBinding.apply(this,[J,L,H].concat(I))){a.setAttribute(J,L,H)}}if(!this.hasBinding(L)){J.addEventListener("change",function(M){if(v.has(G)){if(D){v.update(G,E,J[L])}else{v.set(G,J[L])}}},true)}this.observers[G]=this.observers[G]||[];this.observers[G].push(v.watchValue(G,function(M){if(!this.execBinding.apply(this,[J,L,d.getNestedProperty(M,D)].concat(I))){a.setAttribute(J,L,d.getNestedProperty(M,D))}},this))};this.set=function p(D){if(a.isAcceptedType(D)&&D.name){v.set(D.name,D.value);return true}else{return false}};this.form=function f(E){if(E&&E.nodeName=="FORM"){var D=this;E.addEventListener("submit",function(F){d.toArray(E.querySelectorAll("[name]")).forEach(D.set,D);F.preventDefault()},true);return true}else{return false}};this.addBinding=function B(D,E){if(D&&typeof D=="string"&&typeof E=="function"){h[D]=E;return true}else{return false}};this.execBinding=function m(E,D){if(this.hasBinding(D)){h[D].apply(E,Array.prototype.slice.call(arguments,2));return true}else{return false}};this.hasBinding=function z(D){return h.hasOwnProperty(D)};this.getBinding=function o(D){return h[D]};this.addBindings=function u(D){return d.loop(D,function(F,E){this.addBinding(E,F)},this)};this.setModel(w);this.addBindings(k)}});define("Olives/OObject",["StateMachine","Store","Olives/Plugins","Olives/DomUtils","Tools"],function OObject(a,e,f,b,c){return function d(p){var m=function m(r){var q=g||document.createElement("div");if(r.template){if(typeof r.template=="string"){q.innerHTML=r.template.trim()}else{if(b.isAcceptedType(r.template)){q.appendChild(r.template)}}if(q.childNodes.length>1){throw Error("UI.template should have only one parent node")}else{r.dom=q.childNodes[0]}r.plugins.apply(r.dom)}else{throw Error("UI.template must be set prior to render")}},j=function j(s,q,r){if(q){r?q.insertBefore(s.dom,r):q.appendChild(s.dom);g=q}},n=function n(q,r){m(q);j.apply(null,c.toArray(arguments))},g=null,h=new a("Init",{Init:[["render",m,this,"Rendered"],["place",n,this,"Rendered"]],Rendered:[["place",j,this],["render",m,this]]});this.model=p instanceof e?p:new e;this.plugins=new f();this.template=null;this.dom=null;this.place=function j(r,q){h.event("place",this,r,q)};this.render=function m(){h.event("render",this)};this.setTemplateFromDom=function o(q){if(b.isAcceptedType(q)){this.template=q;return true}else{return false}};this.alive=function k(q){if(b.isAcceptedType(q)){this.setTemplateFromDom(q);this.place(q.parentNode,q.nextElementSibling);return true}else{return false}};this.getCurrentPlace=function(){return g}}});define("Olives/Plugins",["Tools","Olives/DomUtils"],function Plugins(b,a){return function c(){var m={},d=function d(n){return n.trim()},h=function h(p,n,o){n.split(";").forEach(function(r){var q=r.split(":"),t=q[0].trim(),s=q[1]?q[1].split(",").map(d):[];s.unshift(p);if(m[o]&&m[o][t]){m[o][t].apply(m[o],s)}})};this.add=function k(p,r){var q=this,o="plugins";if(typeof p=="string"&&typeof r=="object"&&r){m[p]=r;r[o]={name:p,apply:function n(){return q.apply.apply(q,arguments)}};return true}else{return false}};this.addAll=function j(n){return b.loop(n,function(p,o){this.add(o,p)},this)};this.get=function g(n){return m[n]};this.del=function e(n){return delete m[n]};this.apply=function f(o){var n;if(a.isAcceptedType(o)){n=a.getNodes(o);b.loop(b.toArray(n),function(p){b.loop(a.getDataset(p),function(q,r){h(p,q,r)})});return o}else{return false}}}});define("Olives/Transport",["Observable","Tools"],function Transport(b,c){return function a(p,r){var m=null,k=null,d=new b(),g={};this.setIO=function e(u){if(u&&typeof u.connect=="function"){k=u;return true}else{return false}};this.getIO=function f(){return k};this.connect=function t(u){if(typeof u=="string"){m=k.connect(u);return true}else{return false}};this.getSocket=function o(){return m};this.on=function q(v,u){return m.on(v,u)};this.once=function h(v,u){return m.once(v,u)};this.emit=function s(u,v,w){return m.emit(u,v,w)};this.removeListener=function s(u,v,w){return m.removeListener(u,v,w)};this.request=function n(y,z,x,w){if(typeof y=="string"&&typeof z!="undefined"){var v={eventId:Date.now()+Math.floor(Math.random()*1000000),data:z},u=function(){x&&x.apply(w||null,arguments)};this.once(v.eventId,u);this.emit(y,v);return true}else{return false}};this.listen=function j(A,B,z,x){if(typeof A=="string"&&typeof B!="undefined"&&typeof z=="function"){var v={eventId:Date.now()+Math.floor(Math.random()*1000000),data:B,keepAlive:true},u=function(){z&&z.apply(x||null,arguments)},y=this;this.on(v.eventId,u);this.emit(A,v);return function w(){y.emit("disconnect-"+v.eventId);y.removeListener(v.eventId,u)}}else{return false}};this.setIO(p);this.connect(r)}});define("Olives/UI-plugin",["Olives/OObject","Tools"],function(c,b){return function a(f){var e={};this.place=function d(m,k){if(e[k] instanceof c){e[k].place(m)}else{throw new Error(k+" is not an OObject UI in place:"+k)}};this.set=function j(k,m){if(typeof k=="string"&&m instanceof c){e[k]=m;return true}else{return false}};this.setAll=function h(k){b.loop(k,function(n,m){this.set(m,n)},this)};this.get=function g(k){return e[k]};this.setAll(f)}});