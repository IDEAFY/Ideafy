/**
 * https://github.com/TAIAUT/Ideafy
 * Proprietary License - All rights reserved
 * Author: Olivier Wietrich <Olivier.Wietrich@taiaut.com>
 * Copyright (c) 2012-2013 TAIAUT
 */

define("Amy/DomUtils",["DomUtils","Tools"],function(e,t){return{hasQuerySelector:function(i,n,s){return t.toArray(e.getNodes(i,s)).indexOf(n)>-1}}}),define("Amy/TestUtils",[],function(){var e=function(e){return"string"==typeof e},t=function(t,i){throw new Error(e(i)?i:t)};return{assertIsObject:function(e,i){return e instanceof Object||t("Is not Object",i),!0},assertIsObservable:function(e,i){return e&&"function"==typeof e.watch&&"function"==typeof e.notify||t("Is not Observable",i),!0},assertIsString:function(i,n){return e(i)||t("Is not String",n),!0}}}),define("Amy/Stack-plugin",["Amy/Stack-service"],function(e){return function(t,i){var n=new e(t,i);this.getStack=function(){return n},this.destination=function(e){n.setDestination(e)},this.hide=function(){n.hide()},this.show=function(e,t,i,s){e.addEventListener(t,function(e){n.show(e.target.getAttribute(i))},"true"==s)}}}),define("Amy/Event-controller",["Amy/TestUtils","Tools"],function(e,t){return function(e,i){var n=e instanceof Object?e:null,s=function(e){return"boolean"==typeof e?e:!1},a=function(){var e,t=!0;for(e=arguments.length;e>=0;e--)t=t&&"string"==typeof arguments[e];return t},r=s(i),o={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};this.addListener=function(e,t,i,n){e.addEventListener(this.map(t),i,n)},this.call=function(e){n[e].apply(n,t.toArray(arguments).slice(1))},this.isTouch=function(){return r},this.setTouch=function(e){return s(e)?(r=e,!0):!1},this.setMap=function(e,t){return a(e,t)?(o[e]=t,!0):!1},this.map=function(e){var t=o[e];return t&&r?t:e},this.setScope=function(e){return n=e,!0},this.scope=function(){return n}}}),define("Amy/Delegate-plugin",["Amy/Event-controller","Amy/DomUtils"],function(e,t){function i(){this.listen=function(e,t,i,n){var s=this;this.addListener(e,t,function(t){s.call(i,t,e)},"true"==n)},this.selector=function(e,i,n,s,a){var r=this;this.addListener(e,n,function(n){t.hasQuerySelector(e,n.target,i)&&r.call(s,n,e)},"true"==a)}}return function(t,n){return i.prototype=new e(t,n),new i}}),define("Amy/Control-plugin",["Amy/Event-controller","Amy/DomUtils"],function(e,t){function i(){var e=null;this.init=function(t){e=t},this.radio=function(i,n,s,a,r,o){var c=this;this.addListener(i,a,function(a){var o=a.target;t.hasQuerySelector(i,o,n)&&(c.radioClass(o,e,s),e=o,c.call(r,a))},"true"==o)},this.radioClass=function(e,t,i){e.classList.add(i),t&&t!=e&&t.classList.remove(i)},this.toggleClass=function(e,t){return e.classList.toggle(t)},this.toggle=function(e,i,n,s,a,r){var o=this;this.addListener(e,s,function(s){var r=s.target;t.hasQuerySelector(e,r,i)&&(o.toggleClass(r,n),o.call(a,s))},"true"==r)}}return function(t,n){return i.prototype=new e(t,n),new i}}),define("Amy/Stack-service",["Store","OObject","DomUtils","Tools"],function(e,t,i){return function(n,s){var a=new e(n),r=s,o="",c=null;this.setDestination=function(e){return i.isAcceptedType(e)?(r=e,!0):!1},this.getDestination=function(){return r},this.setCurrentScreen=function(e){c=e},this.getCurrentScreen=function(){return c},this.add=function(e,i){return"string"==typeof e&&i instanceof t?(a.set(e,i),this.hide(i),!0):!1},this.get=function(e){return a.get(e)},this.del=function(e){return a.del(e)},this.reset=function(e){return a.reset(e)},this.getCurrentName=function(){return o},this.show=function(e){var t=this.get(e);return t&&e!==o?(t.place(r),c&&this.hide(c),this.setCurrentScreen(t),o=e,!0):!1},this.hide=function(e){e.place(document.createDocumentFragment())}}});